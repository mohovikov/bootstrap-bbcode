function bbcodeToHtml(e){let t=e;const o=[];return t=t.replace(/\[code\]([\s\S]*?)\[\/code\]/gi,(e,t)=>{const s=`__CODE_${o.length}__`;return o.push(`<pre class="bg-light p-2 rounded border"><code>${DOMPurify.sanitize(t)}</code></pre>`),s}),t=t.replace(/\[b\]([\s\S]*?)\[\/b\]/gi,"<strong>$1</strong>").replace(/\[i\]([\s\S]*?)\[\/i\]/gi,"<em>$1</em>").replace(/\[u\]([\s\S]*?)\[\/u\]/gi,'<span class="text-decoration-underline">$1</span>').replace(/\[s\]([\s\S]*?)\[\/s\]/gi,'<span class="text-decoration-line-through">$1</span>').replace(/\[url=(https?:\/\/[^\s]+)\]([\s\S]*?)\[\/url\]/gi,'<a href="$1" class="link-primary" target="_blank" rel="nofollow">$2</a>').replace(/\[url\](https?:\/\/[^\s]+)\[\/url\]/gi,'<a href="$1" class="link-primary" target="_blank" rel="nofollow">$1</a>').replace(/\[img\](https?:\/\/[^\s]+)\[\/img\]/gi,'<img src="$1" class="img-fluid rounded" alt="">').replace(/\[img=([\s\S]*?)\]([\s\S]*?)\[\/img\]/gi,'<img src="$1" alt="$2" title="$2" class="img-fluid rounded">').replace(/\[center\]([\s\S]*?)\[\/center\]/gi,'<div class="text-center">$1</div>').replace(/\[color=(\w+)\]([\s\S]*?)\[\/color\]/gi,'<span class="text-$1">$2</span>').replace(/\[size=(\d)\]([\s\S]*?)\[\/size\]/gi,'<span class="fs-$1">$2</span>').replace(/\[quote\]([\s\S]*?)\[\/quote\]/gi,'<figure><blockquote class="blockquote">$1</blockquote><figcaption class="blockquote-footer">Кто-то знаменитый</figcaption></figure>').replace(/\[quote=([^\]\s]+)(?:\s+style=(\w+))?\]([\s\S]*?)\[\/quote\]/gis,function(e,t,o,s){let r="";switch((o||"default").toLowerCase()){case"forum":r=`Сообщение от <cite>${t}</cite>`;break;case"minimal":r=`<cite>${t}</cite>`;break;default:r=`<cite>${t}</cite> сказал:`}return`<figure><blockquote class="blockquote">${s}</blockquote><figcaption class="blockquote-footer">${r}</figcaption></figure>`}),o.forEach((e,o)=>t=t.replace(`__CODE_${o}__`,e)),DOMPurify.sanitize(t,{ALLOWED_TAGS:["strong","em","span","a","img","div","figure","blockquote","figcaption","pre","code"],ALLOWED_ATTR:["class","href","src","alt","rel","target","title","style"]})}console.log("%cBootstrap BBCode Parser v1.0 loaded! %chttps://github.com/mohovikov/bootstrap-bbcode/wiki/How-to-use","color: green; font-weight: bold;","color: blue; text-decoration: underline;");